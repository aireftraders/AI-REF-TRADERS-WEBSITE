<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI REF-TRADERS - SPA</title>
    <!-- Nigeria-Focused SEO Meta Tags -->
    <meta name="description" content="AI REF-TRADERS: Make money online in Nigeria through AI trading, referrals & games">
    <meta name="keywords" content="make money online Nigeria, Lagos side hustle, Abuja online business">
    <meta name="author" content="AI REF-TRADERS Nigeria">
    
    <style>
        :root {
            --primary: #6C5CE7;
            --secondary: #00CEFF;
            --dark: #2D3436;
            --light: #F5F6FA;
            --success: #00B894;
            --danger: #D63031;
            --nigerian-green: #008753;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light);
            color: var(--dark);
        }
        
        #app-container {
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding-bottom: 60px;
            overflow-x: hidden;
        }
        
        #content-container {
            width: 100%;
            min-height: calc(100vh - 60px);
        }
        
        .nav-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            background-color: var(--primary);
            padding: 10px 0;
            z-index: 1000;
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 8px 12px;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 12px;
            text-align: center;
        }
        
        .nav-item.active {
            background-color: var(--secondary);
            transform: scale(1.05);
        }
        
        .nav-item i {
            display: block;
            font-size: 20px;
            margin-bottom: 3px;
        }
        
        /* Splash Screen Styles */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #121212, #1E1E1E);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease-out;
        }
        
        .splash-logo {
            width: 120px;
            height: 120px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.8; }
        }
        
        /* Login Modal Styles */
        #login-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9998;
        }
        
        .login-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 400px;
            color: var(--dark);
        }
        
        /* Loading Screen */
        #page-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9997;
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen">
        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/ChatGPT%20Image%20Apr%2030%2C%202025%2C%2002_36_32%20AM-1wDDnne5fpylqjmbzveVpRiAKxNNkS.png" class="splash-logo" alt="AI REF-TRADERS Logo">
        <h2>AI REF-TRADERS</h2>
        <p>Nigeria's Premier AI Trading Platform</p>
        <div style="width: 200px; height: 4px; background: rgba(255,255,255,0.2); margin-top: 20px;">
            <div id="splash-progress" style="width: 0%; height: 100%; background: var(--primary); transition: width 0.3s;"></div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div id="login-modal">
        <div class="login-content">
            <h2 style="text-align: center; color: var(--primary);">Welcome Back</h2>
            <div id="login-tabs" style="display: flex; margin-bottom: 20px;">
                <div id="login-tab" style="flex: 1; text-align: center; padding: 10px; background: var(--primary); color: white; border-radius: 8px 0 0 8px; cursor: pointer;">Login</div>
                <div id="register-tab" style="flex: 1; text-align: center; padding: 10px; background: #ddd; border-radius: 0 8px 8px 0; cursor: pointer;">Register</div>
            </div>
            
            <div id="login-form">
                <input type="email" id="login-email" placeholder="Email" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <input type="password" id="login-password" placeholder="Password" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <button id="login-btn" style="width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">Login</button>
            </div>
            
            <div id="register-form" style="display: none;">
                <input type="text" id="register-name" placeholder="Full Name" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <input type="email" id="register-email" placeholder="Email" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <input type="tel" id="register-phone" placeholder="Phone Number" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <input type="password" id="register-password" placeholder="Password" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <input type="password" id="register-confirm" placeholder="Confirm Password" style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ddd;">
                <button id="register-btn" style="width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">Register</button>
            </div>
            
            <p id="auth-message" style="text-align: center; margin-top: 15px; color: var(--danger);"></p>
        </div>
    </div>
    
    <!-- Page Loading Indicator -->
    <div id="page-loading">
        <div style="text-align: center;">
            <div style="width: 50px; height: 50px; border: 5px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: var(--primary); animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
            <p>Loading...</p>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div id="app-container">
        <div id="content-container">
            <!-- Dynamic content will be loaded here -->
        </div>
        
        <div class="nav-bar">
            <a href="#dashboard" class="nav-item active" onclick="loadPage('dashboard')">
                <i>üè†</i> Dashboard
            </a>
            <a href="#trading" class="nav-item" onclick="loadPage('trading')">
                <i>üìà</i> Trading
            </a>
            <a href="#games" class="nav-item" onclick="loadPage('games')">
                <i>üéÆ</i> Games
            </a>
            <a href="#ads" class="nav-item" onclick="loadPage('ads')">
                <i>üì∫</i> Ads
            </a>
            <a href="#profile" class="nav-item" onclick="loadPage('profile')">
                <i>üë§</i> Profile
            </a>
        </div>
    </div>

    <script>
        // Configuration
        const PAGES = {
            dashboard: 'dashboard-index.html',
            trading: 'trading.html',
            games: 'game.html',
            ads: 'ads.html',
            profile: 'profile.html'
        };
        
        // Global state
        let currentPage = 'dashboard';
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        
        // Initialize the SPA
        document.addEventListener('DOMContentLoaded', function() {
            // Show splash screen
            showSplashScreen();
            
            // Initialize login modal tabs
            document.getElementById('login-tab').addEventListener('click', function() {
                document.getElementById('login-form').style.display = 'block';
                document.getElementById('register-form').style.display = 'none';
                document.getElementById('login-tab').style.background = 'var(--primary)';
                document.getElementById('login-tab').style.color = 'white';
                document.getElementById('register-tab').style.background = '#ddd';
                document.getElementById('register-tab').style.color = 'var(--dark)';
            });
            
            document.getElementById('register-tab').addEventListener('click', function() {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'block';
                document.getElementById('register-tab').style.background = 'var(--primary)';
                document.getElementById('register-tab').style.color = 'white';
                document.getElementById('login-tab').style.background = '#ddd';
                document.getElementById('login-tab').style.color = 'var(--dark)';
            });
            
            // Initialize login/register buttons
            document.getElementById('login-btn').addEventListener('click', handleLogin);
            document.getElementById('register-btn').addEventListener('click', handleRegister);
            
            // Check authentication status after splash screen
            setTimeout(() => {
                checkAuthStatus();
            }, 2500);
        });
        
        // Show splash screen animation
        function showSplashScreen() {
            const splashProgress = document.getElementById('splash-progress');
            let progress = 0;
            
            const interval = setInterval(() => {
                progress += 5;
                splashProgress.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('splash-screen').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('splash-screen').style.display = 'none';
                        }, 500);
                    }, 300);
                }
            }, 100);
        }
        
        // Check authentication status
        function checkAuthStatus() {
            if (!isLoggedIn) {
                document.getElementById('login-modal').style.display = 'flex';
            } else {
                // Check URL hash for initial page
                const hash = window.location.hash.substring(1);
                if (hash && PAGES[hash]) {
                    currentPage = hash;
                    document.querySelector(`.nav-item[href="#${currentPage}"]`).classList.add('active');
                    document.querySelector(`.nav-item[href="#dashboard"]`).classList.remove('active');
                }
                
                // Load the initial page
                loadPage(currentPage, true);
                
                // Handle hash changes
                window.addEventListener('hashchange', function() {
                    const newPage = window.location.hash.substring(1);
                    if (newPage && PAGES[newPage] && newPage !== currentPage) {
                        currentPage = newPage;
                        loadPage(currentPage);
                    }
                });
            }
        }
        
        // Handle login
        async function handleLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const message = document.getElementById('auth-message');
            
            if (!email || !password) {
                message.textContent = 'Please enter both email and password';
                return;
            }
            
            // Simulate login (replace with actual API call)
            try {
                showLoading(true);
                // const response = await fetch('https://v0-paystack-serverless-backend.vercel.app/api/login', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify({ email, password })
                // });
                // const data = await response.json();
                
                // Simulated successful login
                await new Promise(resolve => setTimeout(resolve, 1500));
                const data = { success: true, user: { email, name: "Demo User" } };
                
                if (data.success) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('userEmail', email);
                    localStorage.setItem('userName', data.user.name || 'User');
                    isLoggedIn = true;
                    
                    document.getElementById('login-modal').style.display = 'none';
                    loadPage('dashboard', true);
                } else {
                    message.textContent = data.message || 'Login failed';
                }
            } catch (error) {
                message.textContent = 'Login failed. Please try again.';
                console.error('Login error:', error);
            } finally {
                showLoading(false);
            }
        }
        
        // Handle registration
        async function handleRegister() {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const phone = document.getElementById('register-phone').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            const message = document.getElementById('auth-message');
            
            if (!name || !email || !phone || !password || !confirm) {
                message.textContent = 'Please fill all fields';
                return;
            }
            
            if (password !== confirm) {
                message.textContent = 'Passwords do not match';
                return;
            }
            
            // Simulate registration (replace with actual API call)
            try {
                showLoading(true);
                // const response = await fetch('https://v0-paystack-serverless-backend.vercel.app/api/register', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify({ name, email, phone, password })
                // });
                // const data = await response.json();
                
                // Simulated successful registration
                await new Promise(resolve => setTimeout(resolve, 1500));
                const data = { success: true, user: { email, name } };
                
                if (data.success) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('userEmail', email);
                    localStorage.setItem('userName', name);
                    isLoggedIn = true;
                    
                    document.getElementById('login-modal').style.display = 'none';
                    loadPage('dashboard', true);
                } else {
                    message.textContent = data.message || 'Registration failed';
                }
            } catch (error) {
                message.textContent = 'Registration failed. Please try again.';
                console.error('Registration error:', error);
            } finally {
                showLoading(false);
            }
        }
        
        // Load a page dynamically
        async function loadPage(pageName, isInitialLoad = false) {
            if (!PAGES[pageName]) return;
            
            showPageLoading(true);
            
            try {
                // Fetch the page content
                const response = await fetch(PAGES[pageName]);
                if (!response.ok) throw new Error('Failed to load page');
                
                const html = await response.text();
                
                // Extract the full document structure
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Replace the content container with the new page's body
                const newContent = document.createElement('div');
                newContent.innerHTML = doc.body.innerHTML;
                
                // Preserve scripts by recreating them
                const scripts = newContent.querySelectorAll('script');
                scripts.forEach(oldScript => {
                    const newScript = document.createElement('script');
                    if (oldScript.src) {
                        newScript.src = oldScript.src;
                    } else {
                        newScript.textContent = oldScript.textContent;
                    }
                    oldScript.parentNode.replaceChild(newScript, oldScript);
                });
                
                const container = document.getElementById('content-container');
                container.innerHTML = '';
                container.appendChild(newContent);
                
                // Update active nav item
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`.nav-item[href="#${pageName}"]`).classList.add('active');
                
                // Update URL hash if this wasn't triggered by a hash change
                if (!isInitialLoad) {
                    window.location.hash = pageName;
                }
                
                // Scroll to top
                window.scrollTo(0, 0);
                
            } catch (error) {
                console.error('Error loading page:', error);
                document.getElementById('content-container').innerHTML = `
                    <div style="text-align: center; padding: 50px;">
                        <h2>Error loading page</h2>
                        <p>Failed to load ${pageName}. Please try again.</p>
                        <button onclick="loadPage('${pageName}')" style="padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">Retry</button>
                    </div>
                `;
            } finally {
                showPageLoading(false);
            }
        }
        
        // Show/hide loading indicator
        function showPageLoading(show) {
            document.getElementById('page-loading').style.display = show ? 'flex' : 'none';
        }
        
        function showLoading(show) {
            if (show) {
                document.getElementById('page-loading').style.display = 'flex';
                document.getElementById('page-loading').style.zIndex = '9999';
            } else {
                document.getElementById('page-loading').style.display = 'none';
            }
        }
        
        // Make loadPage available globally for HTML onclick handlers
        window.loadPage = loadPage;
    </script>
</body>
</html>
